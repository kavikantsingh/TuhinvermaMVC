(function(){this.FileUploader=function(){function t(n,t,i,r,u,f){var o,e;this.url=n;this.successCallback=t;this.FileInput=i;this.uploadWrapper=r;this.parent=u;this.progressContainer=f!=null?f:"#ProgressContainer";this.fileInput=null;o=this;e=this.parent;console.log(this.FileInput);this.request=new XMLHttpRequest;this.request.onreadystatechange=function(){var t,n;if(this.readyState===4){console.log("state Changed to 4");e.wait(!1);try{console.log(this);n=JSON.parse(this.response);n=JSON.parse(n)}catch(i){t=i;n={status:"error",data:"Unknown error occurred: ["+this.response+"]"}}console.log(n);n.Status&&(console.log(o),e.addDocumentToList(n.ProviderDocumentGET[0]))}};this.fileData=new FormData;this.fileData.append("file",this.FileInput[0].files[0]);this.fileInput=this.FileInput;console.log("reached input");this.validate()&&this.upload();return}var n,i;return n=t.prototype,i=self,n.thisObj="",n.fileData,n.request=null,n.url="",n.fileData=null,n.successCallback=null,n.upload=function(){var n;console.log("Uploading File");n=$(this.progressContainer).show();this.request.upload.addEventListener("progress",function(t){var i;return i=Math.round(t.loaded/t.total*100),n.find("span.UploadProgress").first().text(i+"%")},!1);this.request.open("POST",this.url);console.log(this.fileData);this.request.send(this.fileData)},n.processReadystate=function(n){console.log(n);this.successCallback&&typeof this.successCallback=="function"&&(console.log("callback"),this.successCallback(n))},n.validate=function(){var n;return n=!1,this.FileInput[0].files[0]!=null&&(n=!0),console.log(this.parent.Manager.UserId!=null&&this.parent.Manager.ApplicationId!=null&&this.parent.Manager.Key!=null&&this.parent.Manager.ProviderId!=null),this.parent.Manager.UserId!=null&&this.parent.Manager.ApplicationId!=null&&this.parent.Manager.Key!=null&&this.parent.Manager.ProviderId!=null?(this.fileData.append("applicationId",this.parent.Manager.ApplicationId),this.fileData.append("providerId",this.parent.Manager.ProviderId),this.fileData.append("key",this.parent.Manager.Key),this.fileData.append("userId",this.parent.Manager.UserId),this.fileData.append("docId",$(this.parent.Wrapper).data("docid")),this.fileData.append("docCode",$(this.parent.Wrapper).data("docCode")),n=!0):n=!1,console.log(this.parent.isSimple),this.parent.isSimple&&this.fileData.append("isSimple","true"),this.parent.isSimple||this.parent.DocumentName==null||this.parent.DocumentType==null||this.parent.DocumentTypeId==null||(console.log(this.parent.DocumentType,this.parent.DocumentTypeId),this.fileData.append("isSimple","false"),this.fileData.append("docTypeId",this.parent.DocumentTypeId),this.fileData.append("docTypeName",this.parent.DocumentType),n=!0),n},t}()}).call(this);