(function(){this.FileUploader=function(){function t(n,t,i,r,u,f){var e;this.url=n;this.successCallback=t;this.FileInput=i;this.uploadWrapper=r;this.formTypeSelector=u!=null?u:"MediaUploader";this.progressContainer=f!=null?f:"#ProgressContainer";this.fileInput=null;e=this;console.log(this.FileInput);this.request=new XMLHttpRequest;this.request.onreadystatechange=function(){var t,n;if(this.readyState===4){console.log("state Changed to 4");try{n=JSON.parse(this.response);console.log(n)}catch(i){t=i;n={status:"error",data:"Unknown error occurred: ["+this.responseText+"]"};console.log(n)}n.status==="success"&&e.processReadystate(n)}};this.fileData=new FormData;console.log(this.FileInput[0].files[0]);this.fileData.append("file",this.FileInput[0].files[0]);this.fileInput=this.FileInput;console.log("reached input");this.upload();return}var n,i;return n=t.prototype,i=self,n.thisObj="",n.request=null,n.url="",n.fileData=null,n.successCallback=null,n.upload=function(){var n;console.log("Uploading File");n=$(this.progressContainer).show();this.request.upload.addEventListener("progress",function(t){var i;return i=Math.round(t.loaded/t.total*100),n.find("span.UploadProgress").first().text(i+"%")},!1);this.request.open("POST",this.url);this.request.send(this.fileData)},n.processReadystate=function(n){this.successCallback&&typeof this.successCallback=="function"&&(console.log("callback"),this.successCallback(n))},t}()}).call(this);